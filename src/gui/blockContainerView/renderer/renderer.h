#ifndef renderer_h
#define renderer_h

#include <vector>

#include "middleEnd/blockContainerManager.h"
#include "../viewManager/viewManager.h"
#include "color.h"


// This is the renderer interface. It defines all the methods that non-windowing
// or renderer-specific code should be able to call. Each implementation is
// responsible for defining a render function and calling it in a loop.

// Under Construction Notes -----
// placeholder system for submitting sprites using BlockType, not sure how they
// will be handled
//
// more effects will be added. maybe for submitting circles and stuff
// it might be cool if tints could fade out too
//
// the final version will not take a viewmanager pointer. That argument will
// be replaced with a view matrix generated by the viewmanager

typedef unsigned int LineID;
typedef unsigned int TintID;

class Renderer {
public:
    // main flow
    virtual void setBlockContainer(BlockContainerWrapper* blockContainer) = 0;
    // virtual void setSimulator(Simulator* simulator) = 0;

    virtual void updateView(ViewManager* viewManager) = 0;
    // virtual void updateBlockContainer(Difference diff) = 0;

    // effect layer
    virtual LineID addLine(const std::vector<FPosition>& positions, float width) = 0;
    virtual void updateLinePosition(LineID line, int index, FPosition position) = 0;
    virtual void updateLinePositions(LineID line, std::vector<FPosition>& positions) = 0;
    virtual void updateLineWidth(LineID line, float width) = 0;
    virtual void removeLine(LineID line) = 0;

    virtual TintID addTint(Position position, Color color) = 0;
    virtual TintID addTint(FPosition start, float width, float height, Color color) = 0;
    virtual void updateTintColor(TintID tint, Color color) = 0;
    virtual void updateTintRect(Position start, float width, float height) = 0;
    virtual void removeTint(TintID tint) = 0;

    virtual void addConfetti(FPosition start) = 0;
};

#endif // renderer_h
